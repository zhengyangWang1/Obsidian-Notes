---
title: A6åˆ†æä¸ç®€ç­”
categories:
  - Notes
  - è¯¾ç¨‹
  - ç¥ç»ç½‘ç»œä¸æ·±åº¦å­¦ä¹ 
tags:
  - æ·±åº¦å­¦ä¹ 
  - ç¥ç»ç½‘ç»œ
date:
---
### A6.1 (5åˆ†) åˆ†æå·ç§¯ç¥ç»ç½‘ç»œä¸­ç”¨1Ã—1çš„å·ç§¯æ ¸çš„ä½œç”¨ã€‚
[ä¸€æ–‡è¯»æ‡‚å·ç§¯ç¥ç»ç½‘ç»œä¸­çš„1x1å·ç§¯æ ¸ - çŸ¥ä¹](https://zhuanlan.zhihu.com/p/40050371)

1. æ”¹å˜é€šé“æ•°
	å½“å·ç§¯æ ¸çš„ä¸ªæ•°å¤§äºæˆ–å°äºè¾“å…¥é€šé“æ•°æ—¶ï¼Œå¯ä»¥æ”¹å˜è¾“å‡ºçš„é€šé“æ•°
2. å¢åŠ éçº¿æ€§ 
	1x1å·ç§¯æ ¸å¯ä»¥åœ¨ä¸æ”¹å˜ç‰¹å¾ç»´åº¦çš„æƒ…å†µä¸‹æ·»åŠ éçº¿æ€§æ¿€æ´»
### A6.2 (5åˆ†) è®¡ç®—å‡½æ•°$ğ‘¦ = max(ğ‘¥_1,â‹¯,ğ‘¥_ğ·)$å’Œå‡½æ•°$ğ‘¦ = argmax(ğ‘¥_1,â‹¯,ğ‘¥_ğ·)$çš„æ¢¯åº¦ã€‚
$ğ‘¦ = max(ğ‘¥_1,â‹¯,ğ‘¥_ğ·)$ï¼šå¦‚æœå¯¹äºè¾“å…¥å‘é‡ä¸­çš„æŸä¸ªå…ƒç´ $ğ‘¥_ğ‘–$ï¼Œå®ƒæ˜¯æœ€å¤§å€¼ï¼Œåˆ™å…¶æ¢¯åº¦ä¸º1ï¼Œå…¶ä»–æ‰€æœ‰å…ƒç´ çš„æ¢¯åº¦éƒ½ä¸º0ã€‚ç”¨æ•°å­¦ç¬¦å·è¡¨ç¤ºä¸º
$$
\frac{\partial y}{\partial x_{i}}=\left\{\begin{array}{ll}
1, & \text { if } x_{i}=max(ğ‘¥_1,â‹¯,ğ‘¥_ğ·) \\
0, & \text { otherwise }
\end{array}\right.
$$
argmax(ğ‘¥_1,â‹¯,ğ‘¥_ğ·)è¾“å‡ºçš„æ˜¯ä½¿å¾—å‡½æ•°å–å¾—æœ€å¤§å€¼çš„å…ƒç´ çš„ç´¢å¼•ä½ç½®.å¦‚æœå¯¹äºè¾“å…¥å‘é‡ä¸­çš„æŸä¸ªå…ƒç´ ğ‘¥ğ‘–ï¼Œå®ƒçš„ç´¢å¼•ä½ç½®ä¸æœ€å¤§å€¼æ‰€åœ¨çš„ä½ç½®ç›¸åŒï¼Œåˆ™å…¶æ¢¯åº¦ä¸º1ï¼Œå…¶ä»–æ‰€æœ‰å…ƒç´ çš„æ¢¯åº¦éƒ½ä¸º0ã€‚ç”¨æ•°å­¦ç¬¦å·è¡¨ç¤ºä¸º
$$
\frac{\partial y}{\partial x_{i}}=\left\{\begin{array}{ll}
1, & \text { if } i=argmax(ğ‘¥_1,â‹¯,ğ‘¥_ğ·) \\
0, & \text { otherwise }
\end{array}\right.
$$
### A6.3 (5åˆ†) æ¨å¯¼LSTMç½‘ç»œä¸­å‚æ•°çš„æ¢¯åº¦ï¼Œå¹¶åˆ†æå…¶é¿å…æ¢¯åº¦æ¶ˆå¤±çš„æ•ˆæœã€‚
[[å¾ªç¯ç¥ç»ç½‘ç»œ#é•¿çŸ­æ—¶è®°å¿†ç½‘ç»œï¼ˆLSTMï¼‰]]
[LSTM - é•¿çŸ­æœŸè®°å¿†é€’å½’ç¥ç»ç½‘ç»œ - çŸ¥ä¹](https://zhuanlan.zhihu.com/p/123857569)
[Fetching Title#6dum](https://zhuanlan.zhihu.com/p/136223550)

é—å¿˜é—¨
$$f_{t}=\sigma\left(W_{f} \cdot\left[h_{t-1}, x_{t}\right]+b_{f}\right)$$

è®°å¿†é—¨
$$\begin{array}{l}
i_{t}=\sigma\left(W_{i} \cdot\left[h_{t-1}, x_{t}\right]+b_{i}\right) \\
\widetilde{C}_{t}=\tanh \left(W_{C} \cdot\left[h_{t-1}, x_{t}\right]+b_{C}\right) \\

\end{array}$$
è¾“å‡ºé—¨
$$\begin{array}{l}
o_{t}=\sigma\left(W_{o}\left[h_{t-1}, x_{t}\right]+b_{o}\right.) \\
h_{t}=o_{t} * \tanh \left(C_{t}\right)
\end{array}$$
å•å…ƒçŠ¶æ€æ›´æ–°
$$C_{t}=f_{t} * C_{t-1}+i_{t} * \widetilde{C_{t}}$$

LSTM é€šè¿‡è®°å¿†å•å…ƒ C æ¥ç¼“è§£æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ã€‚é’ˆå¯¹ $\frac{\partial C^{(k)}}{\partial C^{(k-1)}}$ æ±‚å¾—ï¼Œ
$$
\begin{aligned}
\frac{\partial C^{(k)}}{\partial C^{(k-1)}}= & \frac{\partial C^{(k)}}{\partial f^{(k)}} \frac{\partial f^{(k)}}{\partial h^{(k-1)}} \frac{\partial h^{(k-1)}}{\partial C^{(k-1)}}+\frac{\partial C^{(k)}}{\partial i^{(k)}} \frac{\partial i^{(k)}}{\partial h^{(k-1)}} \frac{\partial h^{(k-1)}}{\partial C^{(k-1)}} \\
& +\frac{\partial C^{(k)}}{\partial a^{(k)}} \frac{\partial a^{(k)}}{\partial h^{(k-1)}} \frac{\partial h^{(k-1)}}{\partial C^{(k-1)}}+\frac{\partial C^{(k)}}{\partial C^{(k-1)}}
\end{aligned}
$$

å…·ä½“è®¡ç®—åå¾—åˆ°ï¼Œ
$$
\begin{array}{c}
\frac{\partial C^{(k)}}{\partial C^{(k-1)}}=C^{(k-1)} \sigma^{\prime}(\cdot) W_{f} o^{(k-1)} \tanh ^{\prime}\left(C^{(k-1)}\right) \\
+a^{(k)} \sigma^{\prime}(\cdot) W_{i} o^{(k-1)} \tanh ^{\prime}\left(C^{(k-1)}\right) \\
+i^{(k)} \tanh ^{\prime}(\cdot) W_{c} * o^{(k-1)} \tanh ^{\prime}\left(C^{(k-1)}\right) \\
+f^{(t)} \\
\prod_{k=t+1}^{T} \frac{\partial C^{(k)}}{\partial C^{(k-1)}}=\left(f^{(k)} f^{(k+1)} \ldots f^{(T)}\right)+\text { other }
\end{array}
$$

åœ¨LSTMè¿­ä»£è¿‡ç¨‹ä¸­ï¼Œé’ˆå¯¹  $\prod_{k=t+1}^{T} \frac{\partial C^{(k)}}{\partial C^{(k-1)}}$  è€Œè¨€ï¼Œæ¯ä¸€æ­¥  $\frac{\partial C^{(k)}}{\partial C^{(k-1)}}$  å¯ä»¥è‡ªä¸»çš„é€‰æ‹©åœ¨  $[0,1]$  ä¹‹é—´ï¼Œæˆ–è€…å¤§äº1ï¼Œå› ä¸º  $f^{(k)}$  æ˜¯å¯è®­ç»ƒå­¦ä¹ çš„ã€‚é‚£ä¹ˆæ•´ä½“  $\prod_{k=t+1}^{T} \frac{\partial C^{(k)}}{\partial C^{(k-1)}}$  ä¹Ÿå°±ä¸ä¼šä¸€ç›´å‡å°ï¼Œè¿œè·ç¦»æ¢¯åº¦ä¸è‡³äºå®Œå…¨æ¶ˆå¤±ï¼Œä¹Ÿå°±èƒ½å¤Ÿè§£å†³RNNä¸­å­˜åœ¨çš„æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ã€‚
### A6.4 (5åˆ†) å½“å°†è‡ªæ³¨æ„åŠ›æ¨¡å‹ä½œä¸ºç¥ç»ç½‘ç»œçš„ä¸€å±‚ä½¿ç”¨æ—¶ï¼Œåˆ†æå®ƒå’Œå·ç§¯å±‚ä»¥åŠå¾ªç¯å±‚åœ¨å»ºæ¨¡é•¿è·ç¦»ä¾èµ–å…³ç³»çš„æ•ˆç‡å’Œè®¡ç®—å¤æ‚åº¦æ–¹é¢çš„å·®å¼‚ã€‚
