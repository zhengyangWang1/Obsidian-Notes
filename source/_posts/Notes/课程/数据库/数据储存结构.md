---
title: 数据储存结构
categories:
  - Notes
  - 课程
  - 数据库
tags:
  - 数据库
date:
---

### 13.1 Introduction
物理数据库中解决的两个问题：
- 数据组织，即数据的物理存储结构 — Ch13 
- 数据访问，例如索引 — Ch14

目标
- 1. 根据DBMS机制，选择合适的数据库物理结构
- 2. 在数据库表上合理设置索引，提高数据查询速度

### 13.2 File Organization
文件逻辑/物理组织 in Operating System Concepts
- 逻辑结构
- 基于记录的文件
- 基于索引的文件（按内容访问）

物理组织/结构
- contiguous, linked, indexed
- 以block为单位，存储 在secondary storage, i.e. disk, SSD


DB 存储为 DB 文件的集合 
- 例如.SQL服务器，主文件，辅文件，日志文件 
- 每个文件都是一系列记录 
- 每条记录都位于一系列字段中 
一种方法
	记录大小是固定的 
	每个文件仅包含一种特定类型的记录 
	不同的文件用于不同的关系

每个文件都是记录序列，每个关系表是一组元组，以元组为单位的DB逻辑文件
在以记录为单位的物理文件 
元组作为记录存储在数据库中 
将元组表示为文件中的记录
	固定长度记录 
	可变长度记录 
	例如，名称 varchar（20）
#### Fixed-Length Records 固定长度记录
一个块包含多条记录 
存储记录 i 从字节 n （i – 1） 开始，其中 n 是每条记录的大小。 
记录访问很简单，但记录可能会跨块 
修改： 不允许记录跨越块边界

删除记录 i： 备选方案： 
	压缩：将记录 i + 1， . . .， n 移动到 i， . . . . ， n – 1 
	将记录 N 移动到 I 
	不要移动记录，而是将所有空闲记录链接在空表

#### Free Lists
将第一条已删除记录的地址存储在文件头中 
使用此第一个删除的记录来存储第二个已删除记录的地址，依此类推 
将这些存储的地址视为指针，因为它们指向记录的位置。 
更节省空间的表示形式 
将空间重新用于可用记录的正常属性以存储指针。（使用中的记录中没有存储指针。）

#### Variable-Length Records 可变长度记录
可变长度记录以多种方式出现 
记录类型允许可变长度，例如字符串 （varchar） 
一个文件中有多种记录类型，例如多表聚类文件 
记录类型允许重复字段，例如多值属性。

#### 如何在块中存储可变长度记录
记录中的属性按顺序存储 
首先是固定长度属性，然后是可变长度属性 
可变长度属性由固定大小（偏移量、长度）表示，实际数据存储在所有固定长度属性之后 由 null 值位图表示的 Null 值